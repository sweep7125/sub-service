# ============================================================================
# CONFIGURATION TEMPLATES - Шаблоны конфигураций
# ============================================================================
#
# В этой директории находятся шаблоны конфигурационных файлов для различных
# VPN клиентов. Шаблоны используются для генерации персональных конфигов.
#
# ============================================================================

## Доступные шаблоны:

### 1. v2ray-template.json
**Тип:** V2Ray/Xray configuration (JSON)
**Клиенты:** V2RayN, V2RayNG, Xray
**Платформы:** Windows, Android, iOS (с соотв. клиентами)

Шаблон содержит массив конфигураций с различными режимами роутинга:
- "Без РФ" - обход блокировок, РФ трафик напрямую
- "Только блок" - только заблокированные ресурсы через VPN

**Плейсхолдеры:**
- `DNS_PLACEHOLDER` - заменяется на DNS сервер из настроек сервера
- `null` в полях address, id, serverName, shortId, spiderX - заполняются из user/server данных


### 2. mihomo-template.yaml
**Тип:** Mihomo/Clash configuration (YAML)
**Клиенты:** Clash, Clash Meta, Mihomo
**Платформы:** Windows, macOS, Linux, Android, iOS

Продвинутый шаблон с:
- TUN режимом для прозрачного проксирования
- Автоматическим выбором сервера по скорости
- Rule-based роутингом (domain/IP правила)
- Встроенным DNS с DoH/DoT

**Плейсхолдеры:**
- `proxy-template` - шаблон для добавления серверов
- Поля в шаблоне (name, server, uuid, servername, public-key, short-id) заполняются автоматически


### 3. clear-config (в корне проекта)
**Тип:** Universal VLESS link template
**Формат:** vless:// URL scheme

Базовый шаблон для генерации прямых VLESS ссылок.

**Плейсхолдеры:**
- `<ID>` - UUID пользователя
- `<ADDRESS>` - адрес сервера
- `<PBK>` - публичный ключ Reality
- `<SPIDERX>` - путь SpiderX
- `<SERVERNAME>` - SNI для TLS
- `<SHORTID>` - короткий ID Reality
- `<NAME>` - имя подключения


## Как добавить новый шаблон:

1. Создайте файл с расширением `.json`, `.yaml` или `.txt`
2. Используйте плейсхолдеры для динамических значений:
   - `{USER_UUID}` - UUID пользователя
   - `{USER_SHORT_ID}` - Short ID пользователя
   - `{SERVER_HOST}` - адрес сервера
   - `{SERVER_SNI}` - SNI сервера
   - `{SERVER_PUBLIC_KEY}` - публичный ключ
   - `{SERVER_DNS}` - DNS сервера
   - `{SERVER_NAME}` - описание сервера
   
3. Добавьте builder в `src/builders/` для обработки шаблона
4. Зарегистрируйте builder в системе сборки конфигов


## Структура системы:

```
templates/
├── README.md                 # Этот файл
├── v2ray-template.json       # Шаблон V2Ray конфигов
├── mihomo-template.yaml      # Шаблон Mihomo конфигов
└── [ваш-шаблон]             # Пользовательские шаблоны

src/
├── models/                   # Модели данных (User, Server)
├── repositories/             # Загрузка данных из файлов
├── services/                 # Бизнес-логика (фильтрация по группам)
└── builders/                 # Генераторы конфигов из шаблонов
    ├── v2ray_builder.py
    ├── mihomo_builder.py
    └── legacy_json_builder.py
```


## Примечания:

- Все шаблоны поддерживают систему групп (users и servers)
- Серверы фильтруются по пересечению групп пользователя и сервера
- Поддерживается обратная совместимость со старым форматом файлов
- Дубликаты серверов (в разных группах) автоматически удаляются

============================================================================
